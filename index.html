<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Min PWA</title>

  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#0b57d0">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="./assets/icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="./assets/icon-512.png">

  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif; margin:0; }
    header { padding:16px; background:#0b57d0; color:#fff; }
    main { padding:16px; display:grid; gap:12px; }
    button { padding:10px 14px; border:0; border-radius:10px; }
    .card { border:1px solid rgba(0,0,0,.1); border-radius:12px; padding:12px; }
  </style>
</head>
<body>
  <header><h1>Min PWA</h1></header>
  <main>
    <section class="card">
      <p>Offline-test: ladda sidan online en g책ng, sl책 p책 flygplansl채ge och ladda om.</p>
      <button id="install" hidden>Installera appen</button>
    </section>
  </main>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
    let deferredPrompt;
    const btn = document.getElementById('install');
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault(); deferredPrompt = e; btn.hidden = false;
    });
    btn.addEventListener('click', async () => {
      btn.hidden = true; if (!deferredPrompt) return;
      deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt = null;
    });
  </script>
</body>
</html>